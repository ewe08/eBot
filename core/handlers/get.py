from aiogram import Bot
from aiogram.types import Message

from core.settings import settings
from core.utils.dbconnect import Request


async def get_help(message: Message):
    if message.chat.type == 'private':
        text = '''–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Å—Ç—ã:
    –í —á–∞—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞, - —ç—Ç–æ –Ω–∏—á—Ç–æ –∏–Ω–æ–µ –∫–∞–∫ —Å—á–∞—Å—Ç—å–µ ü§©
    1. –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ 6 –∏ –±–æ–ª–µ–µ —Å–∏–º–≤–æ–ª–æ–≤ = 1 –µ–¥–∏–Ω–∏—Ü–∞ —Å—á–∞—Å—Ç—å—è
    2. –ï—Å–ª–∏ –≤—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –Ω–µ–¥–µ–ª–∏ –ø–∏—à–µ—Ç–µ –ø–æ 50 –∏ –±–æ–ª–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–æ –≤ –∫–æ–Ω—Ü–µ –Ω–µ–¥–µ–ª–∏ –≤–∞–º –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è 500 –µ–¥–∏–Ω–∏—Ü —Å—á–∞—Å—Ç—å—è, –∞ –¢–û–ü 3 –ø–æ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—á–∞—Å—Ç—å—è –Ω–∞ –∫–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç ???
    3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—á–∞—Ç—å—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é (—Ç–æ –µ—Å—Ç—å –æ—Ç—Å—á—ë—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ), –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤—Å—ë –≤–∞—à–µ —Å—á–∞—Å—Ç—å–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –ø–æ –∏—Ç–æ–≥—É –º–µ—Å—è—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ–¥–µ–ª—å —Ç–∞–∫–∂–µ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è. –¢–µ, –∫—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–∏—Å–∞–ª –ø–æ 50 —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ —É–∂–µ  –≤ —Ç–µ—á–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –º–µ—Å—è—Ü–∞ - –ø–æ–ª—É—á–∞—é—Ç –• –µ–¥–∏–Ω–∏—Ü —Å—á–∞—Å—Ç—å—è, –ê –¢–û–ü 3 –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—á–∞—Å—Ç—å—è –Ω–∞ –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞ –ø–æ–ª—É—á–∞—é—Ç ???
    4. –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∂–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –Ω–æ–≤—ã–º –º–µ—Å—è—Ü–µ–º –≤ 06:00 –ø–æ –ú–°–ö, –Ω–æ –í–°–Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è –∏ –µ–≥–æ –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –Ω–∞—à–µ–º –º–∞—Ä–∫–µ—Ç–µ
    5. –í –¢–û–ü 3 –º–æ–∂–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –ø–∏—à–µ—à—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, —Ç–æ –µ—Å—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —á–∞—Ç–µ (1 –ø—É–Ω–∫—Ç) –∏ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –º–µ—Å—Ç–æ –≤ –¢–û–ü–ï –∑–∞ –Ω–µ–¥–µ–ª—é –∏ –º–µ—Å—è—Ü - —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏ –∏ –æ–Ω–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è.
    6. –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∞—Å—Ç—å—è –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ /profile –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ
    7. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: —Ä–∞–∑ –≤ –º–µ—Å—è—Ü –≤–∞–º –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è 10% –æ—Ç —Å—á–∞—Å—Ç—å—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –ø–æ –≤–∞—à–µ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ —Å—Å—ã–ª–∫–µ –¥—Ä—É–≥–∞, –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤ –±–æ—Ç–µ
    8. –ü—Ä–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–µ–ø–æ–ª–∞–¥–∫–∞—Ö, –≤–æ–ø—Ä–æ—Å–∞—Ö –∏ –ø—Ä–æ—á–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ @Amin01405 –∏ @Eqake
    '''
        await message.answer(text)
    else:
        await message.reply('–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞')


async def get_profile(message: Message, request: Request):
    # [0id, 1user_id, 2chat_id, 3username, 4full_name, 5score,]
    # [6for_day, 7for_week, 8send_in_day, 9all_score]
    if message.chat.type == 'private':
        data = (await request.get_all_data(message.from_user.id, settings.bots.work_chat_id))[0]
        await message.answer(
            f'{data[4]}:\n'
            f'1. –ó–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü –≤—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏: {data[5]}\n'
            f'2. –ó–∞ –≤—Å–µ –≤—Ä–µ–º—è: {data[9]}\n'
            f'3. –ó–∞ —Å–µ–≥–æ–¥–Ω—è(–±–µ–∑ —É—á–µ—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤): {data[6]}\n'
            f'5. –ó–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é –≤—ã –∞–∫—Ç–∏–≤–Ω–∏—á–∞–ª–∏ —Ä–æ–≤–Ω–æ {data[7]} –¥–Ω–µ–π (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º 50 —Å–æ–æ–±—â–µ–Ω–∏–π)\n'
        )
    else:
        await message.reply('–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞')


async def get_stats(message: Message, bot: Bot, request: Request):
    if message.chat.type in ['group', 'supergroup']:
        data = await request.get_top_users(message.chat.id)
        response = '–°–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ:\n'
        i = 1
        for el in data:
            user_id, name, score = [x for x in el][0]
            response += f'{i}. {name} - {score} —Å—á–∞—Å—Ç—å—è\n'
            i += 1
        await message.reply(response, parse_mode='Markdown')
    else:
        await message.reply('–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —á–∞—Ç–∞')